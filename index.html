<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Request attack</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 id="Title">Request attack form.</h1>
    <br>
    <h2>WHEN THE PAGE REDIRECTS THAT MEANS IT IS SENT! DO NOT SEND MORE THAN ONE (it might take a second to redirect)</h2>

    <br>

    <div class="input-container">
        <input id="nameInput", placeholder="Enter name here">
        <br>
        <br>
        <input id="attackFrom", placeholder="Where u attacking from?">
        <br>
        <br>
        <input id="attackTo", placeholder="Where u attacking?">
        <br>
        <br>
        <br>
        <br>
        <button id="submitAttack"> Submit Attack </button>
        <br>
    </div>

    <h5 class="current-ownership">CURRENT OWNERSHIP MAP</h5>
    <img src="States.png" width="1000" alt="Current Ownership Map">
</body>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    
<script>
    const sendRequest = document.getElementById("submitAttack");
    emailjs.init("5aeP8CIyw-oOznJYL");

    function lettersToNumbers(str) {
        const result = [];

        for (let char of str) {
            const charCode = char.toLowerCase().charCodeAt(0);

            // Check if the character is a letter (a-z)
            if (charCode >= 97 && charCode <= 122) {
                result.push(charCode - 96); // a = 1, b = 2, ..., z = 26
            } else {
                result.push(char); // Add non-letter characters unchanged
            }
        }

        return result.join(" ");
    }

    function sendMail(name, message) {
        var templateParams = {attackingName: name, message: message}
        emailjs.send("service_nzxxcwg", "template_aupmc8f", templateParams);
    }

    sendRequest.onclick = function attackSubmit()
    {
        var personName = document.getElementById("nameInput").value;
        var attackingFrom = document.getElementById("attackFrom").value;
        var attackingTo = document.getElementById("attackTo").value;

        var encodedMessage = personName + " is attacking from::" + attackingFrom + " ::and wanting to attack: " + attackingTo

        sendMail(personName, encodedMessage)

        function relocate()
        {
            window.location.replace("notnamedreverse.github.io/statemap-localhost")
        }

        setTimeout(relocate,8000)
    }
    
</script>

</html>
